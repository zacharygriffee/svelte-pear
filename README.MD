# Svelte + Pear Template

A template for creating Svelte applications powered by the **Pear runtime**, designed for building cross-platform desktop applications.

## Features

- **Svelte**: A modern, reactive framework for building user interfaces.
- **Pear Runtime**: P2P-ready runtime.
- **Rollup**: Creates bundles for development purposes.
- **Testing**: Includes `brittle` for testing.
- **File Watching**: Automatically rebuilds bundles during development.

---

## Installation
[Setup Pear](https://docs.pears.com/guides/getting-started)
Open terminal to init where . is the directory you like to init the project to.
```shell
   pear init pear://3bscfiy9y55h568n19qpzjsqx1tan5ec1p9e7hoqpop99zxhshiy .
```

## Project Structure

```
svelte-pear/
├── build/                 # Bundled output (source for production Pear app)
│   └── app.js             # Bundled JavaScript file (Rollup output)
├── src/                   # Source files (used only during development)
│   ├── lib/               # Library folder (root of application source)
│   │   ├── components/    # Svelte components
│   │   │   └── Counter.svelte # Example Svelte component
│   │   └── app.js         # Rollup entry point
│   │   └── App.svelte     # Main App component
├── test/                  # Test files
│   └── index.test.js      # Example test file
├── _template.json         # Template JSON (specific to your app needs)
├── index.html             # Main entry point for Pear (root-level)
├── package.json           # Project configuration and dependencies
├── package-lock.json      # Locked dependency versions
├── README.md              # Project documentation
└── rollup.config.js       # Rollup configuration file
```
$lib and $src similar to sveltekit alias work as expected here.

### Key Directories and Files

- **`src/`**:
    - Contains all development source files, including Svelte components and JavaScript.
    - This directory is **not required** for the production-ready Pear app.

- **`build/`**:
    - Generated by the `npm run build` command.
    - Becomes the **production source** for the Pear app.

- **`index.html`**:
    - Main entry point loaded by Pear and references the `build/` directory for assets.

---

## Development Workflow

### 1. Clone the Repository

```bash
git clone https://github.com/zacharygriffee/svelte-pear-template.git my-new-app
cd my-new-app
```

### 2. Install Dependencies

```bash
npm install
```

### 3. Run the Development Server

```bash
npm run dev
```

This script:
- Watches the `src/` directory for changes.
- Automatically rebuilds the `build/` directory when changes are detected.
- Launches the Pear runtime with live reload capabilities.

### 4. Create the Production Build

Production packaging for the Pear app is handled **entirely by Pear**. However, the `build/` directory will contain all the necessary assets for production once you're ready to package.

To prepare the `build/` directory:
```bash
npm run build
```

This script:
- Generates the `bundle.js` in the `build/` directory for the development environment.

Once the app is ready, Pear's built-in production packaging tools 
- [Read Pear Release Docs for details](https://docs.pears.com/guides/releasing-a-pear-app)

---

## Pear Runtime Configuration

The `pear` configuration is defined in `package.json`:

[Read pear docs for more details.](https://docs.pears.com/)


```json
"pear": {
  "name": "svelte-pear",
  "type": "desktop",
  "gui": {
    "backgroundColor": "#ffffff",
    "height": 768,
    "width": 1024
  }
}
```

### Key Options
- **`name`**: Name of your Pear app.
- **`type`**: Specifies the app type (`desktop`).
- **`gui`**: Configures the appearance and dimensions of the app window.

---

## Scripts

| Script           | Description                                                   |
|-------------------|---------------------------------------------------------------|
| `npm run dev`     | Runs the development server with live reload.                 |
| `npm run build`   | Generates the `build/` directory for development.             |
| `npm run test`    | Runs tests in the `test/` directory using `brittle`.          |
| `npm run watch-build` | Watches for changes in `src/` and rebuilds automatically.  |

---

## Testing

This template uses the `brittle` library for writing and running tests. Add test files in the `test/` directory and run:

```bash
npm run test
```

---

## Production Workflow

When the app is ready for production:
1. Ensure the `build/` directory is complete and up-to-date by running:
   ```bash
   npm run build
   ```
2. Use Pear’s production packaging tools to package the app:
   [Read pear docs for more details.](https://docs.pears.com/)
3. Your app at this point should be available for download via p2p pear link.

---

## License

This template is licensed under the [MIT License](LICENSE).

---